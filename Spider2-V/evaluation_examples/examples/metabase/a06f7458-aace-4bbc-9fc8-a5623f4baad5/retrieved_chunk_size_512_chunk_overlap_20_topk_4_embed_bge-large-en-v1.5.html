Documentation Source:
www.metabase.com/learn/visualization/how-to-create-pivot-tables.html

Documentation Title:
Creating pivot tables

Documentation Content:
)</li><li>and how those orders break down by product category</li></ul><p>Here’s our query using the <strong>Query Builder</strong>:</p><p>Here we’re taking data from the <code>Orders</code>table and summarizing the records. We’re grouping the orders by <code>User → State</code>, <code>Created At</code>(by year), and <code>Product → Category</code>. For each group (say Alaska in 2017), we count the number of orders and add up the subtotals for those orders. (Note that, even though we’ve only selected the <code>Orders</code>table in the data section, Metabase will automatically join the <code>Products</code>and <code>People</code>tables to get the State and Category data.)</p><p>The resulting table is a regular one, with rows for each combination of state, year, and product category.</p><p>Now, let’s say that for each state, we also want to know the sum of the annual subtotals for each state (e.g., how much money did orders for Doohickey products make in Alaska for all years?). To find out, we could add up the subtotals ourselves, or use a pivot table to calculate that figure for us. At the bottom left of your screen, click <strong>Visualization</strong>&gt; <strong>Pivot table</strong>.</p><p>In our pivot table, Metabase has set the rows, columns, and values as follows:</p><ul><li>rows: <code>User → State</code>and <code>Created At</code>(by year)</li><li>columns: <code>Product → Category</code></li><li>values: <code>Count</code>and <code>Sum of Subtotal</code></li></ul><p>Like the flat table, the pivot table lets us see, for example, that in 2020 our customers in Alaska (AK) have purchased a combined 11 Doohickey products for $867.63.



Documentation Source:
www.metabase.com/learn/visualization/how-to-create-pivot-tables.html

Documentation Title:
Creating pivot tables

Documentation Content:
Next, we save that SQL question (here as <code>Raw data for pivot table</code>), and start a new query builder question that uses the results of that question as its starting data.</p><p>Now we can count, sum, and group our results:</p><p>When we visualize this question, we’ll now be able to use the pivot table visualization to see the group subtotals and grand totals.</p><h2>Further reading</h2><a>Visualization types</a><div><a>« Previous</a><a>Next »</a></div><div><div><p>Did this article help you?
        </p><ul><button>Yes
                </button><button>No
                </button></ul></div><button>Send
                </button></div><p>Thanks for your feedback!</p></article></div><footer><div><h5>Subscribe to our newsletter</h5><p>Stay in touch with updates and news from Metabase. No spam, ever.</p></div><div><div><h6>Product</h6><a>Watch Demo</a><a>Data Sources</a><a>Security</a><a>Cloud</a><a>Roadmap</a><a>What's New</a><h6>Pricing</h6><a>Plans</a><a>Open Source</a></div><div><h6>Use Cases</h6><a>Self-Service Business Analytics
        </a><a>Embedded Analytics
        </a><h6>Metabase Plans</h6><a>Starter and Open Source</a><a>Pro</a><a>Enterprise</a></div><div><h6>Features</h6><a>Query Builder</a><a>Drill Through</a><a>Collections</a><a>Usage analytics
          <span>New
          </span></a><a>Analytics dashboards</a><a>SQL editor</a><a>Sandboxing</a><a>Models</a><a>Permissions</a><a>CSV upload</a></div><div><h6>Company</h6><a>Jobs
          <div>We're hiring!



Documentation Source:
www.metabase.com/docs/v0.49/questions/sharing/visualizations/pivot-table.html

Documentation Title:
Pivot table

Documentation Content:
If you really need to use SQL, the workaround here is to create your question in two steps: first do all the complex things you need to do in SQL, save the results as a question, then use that saved SQL question as the starting point for a new GUI question which summarizes that data.</p><p>In the settings for the Pivot Table visualization, you can assign fields to one of three “buckets”:</p><ul><li>Fields to use for the table <strong>rows</strong></li><li>Fields to use for the table <strong>columns</strong></li><li>Fields to use for the table <strong>values</strong></li></ul><p>Let’s say we ask the following question in the notebook editor:</p><p>From the <code>Orders</code>table, we’ve summarized by the count of orders and the average order total, and grouped by <code>User → State</code>, <code>Product → Category</code>, and <code>Created At</code>binned by year. Here’s our question visualized as a pivot table:</p><p>We’ve assigned the fields <code>User → State</code>and <code>Created At</code>to table rows, and assigned the <code>Product -&gt; Category</code>field to generate our columns: Doohickey, Gadget, and so on. We can drag and drop dimensions between the row and column buckets, and add aggregations to the table values bucket. For example, if we assign a field to the columns bucket, Metabase will pivot that field and render each unique value of that field as a column heading.</p><p>You can put multiple fields in the “rows” and “columns” buckets, but note that the order of the fields changes how Metabase displays the table: each additional field will nest within the previous field.</p><p>Where it makes sense, Metabase will automatically include subtotals for grouped rows. For example, as in the image above, because we’ve grouped our rows first by <code>State</code>, then by <code>Created At</code>, Metabase will list each year for each <code>State</code>, and aggregate the metric(s) for that subgroup.



Documentation Source:
www.metabase.com/learn/visualization/how-to-create-pivot-tables.html

Documentation Title:
Creating pivot tables

Documentation Content:
But now the pivot table has grouped the rows related to Alaska, and given a subtotal for those Alaskan rows, allowing us to see the answer to our question: Alaskans purchased 103 Doohickeys from 2016–2020, totaling $6,900.43.</p><p>In addition to the group subtotals, the pivot table also includes both row and column grand totals:</p><ul><li>Row grand total example: the total number of Doohickey orders placed across all states.</li><li>Column grand total example: the sum of all subtotals in Alaska across all product categories.</li></ul><p>We can navigate the table by collapsing and expanding groups of rows:</p><p>Now, let’s try pivoting the table. In the bottom left of the screen, we’ll click on <strong>Settings</strong>. To pivot the table, we’ll move fields between the three buckets: rows, columns, and values.</p><p>Order <em>within</em>a single bucket matters, so let’s start by simply rearranging the table within a single bucket: the rows bucket. If we switch the order of fields to use for table rows, putting <code>Created At</code>above <code>User → State</code>, the table will rearrange itself:</p><p>Now the table groups first by year, then gives a breakdown of orders for each state across each product category.</p><p>We can also switch fields <em>between</em>the buckets, like moving <code>Product → Category</code>from a column to a row, and <code>User → State</code>from a row to a column.</p><p>You can also turn off subtotals for a given row grouping:</p><p>Like with flat tables, we have some sorting and formatting options, and we can click on values in the table to bring up the drill-through menu, which will lets us <a>drill through the data</a>.</p><h2>How to create pivot tables: limitations</h2><p>Pivot tables only work with relational databases that support joins and expressions, so you won’t be able to use them with databases like MongoDB. They also only work with questions composed with the query builder.



